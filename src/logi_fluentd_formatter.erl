%% @copyright 2015 Takeru Ohta <phjgt308@gmail.com>
%%
%% @doc Log Message Formatter
-module(logi_fluentd_formatter).

%%------------------------------------------------------------------------------------------------------------------------
%% Exported API
%%------------------------------------------------------------------------------------------------------------------------
-export([format/5]).

-export_type([formatter/0]).

%%------------------------------------------------------------------------------------------------------------------------
%% 'logi_fluentd_formatter' Callbacks
%%------------------------------------------------------------------------------------------------------------------------
-callback format(formatter(), logi_location:location(), logi_msg_info:info(), io:format(), [term()]) -> iodata().

%%------------------------------------------------------------------------------------------------------------------------
%% Types
%%------------------------------------------------------------------------------------------------------------------------
-type formatter() :: term().

%%------------------------------------------------------------------------------------------------------------------------
%% Exported Functions
%%------------------------------------------------------------------------------------------------------------------------
-spec format(formatter(), logi_location:location(), logi_msg_info:info(), io:format(), [term()]) -> iodata().
format(Formatter, Location, Info, Format, Args) ->
    Module = element(1, Formatter),
    Module:format(Formatter, Location, Info, Format, Args).
